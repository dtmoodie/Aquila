if(WITH_CUDA)
    set(CUDA_LINK_LIBRARIES_KEYWORD PUBLIC)
    list(APPEND CMAKE_MODULE_PATH ${CMAKE_CURRENT_LIST_DIR}/cmake)
    list(REVERSE CMAKE_MODULE_PATH)
    FIND_PACKAGE(CUDA QUIET)
    include("cmake/Cuda.cmake")
    IF(CUDA_FOUND)
        list(APPEND PROJECT_BIN_DIRS_DEBUG_ ${CUDA_BIN_DIR})
        list(APPEND PROJECT_BIN_DIRS_RELEASE_ ${CUDA_BIN_DIR})
        list(APPEND PROJECT_BIN_DIRS_RELWITHDEBINFO_ ${CUDA_BIN_DIR})
        if(NOT CUDA_CUDA_LIBRARY AND UNIX)
            set(CUDA_CUDA_LIBRARY "/usr/local/nvidia/lib64/libcuda.so")
        endif(NOT CUDA_CUDA_LIBRARY AND UNIX)
        set(HAVE_CUDA ON)
        set(MO_HAVE_CUDA 1 CACHE BOOL INTERNAL FORCE)
    else(CUDA_FOUND)
        message("CUDA not found")
    ENDIF(CUDA_FOUND)
endif(WITH_CUDA)
